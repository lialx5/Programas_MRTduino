<xml xmlns="http://www.w3.org/1999/xhtml"><block type="arduino_setup" x="0" y="0"><statement name="MySetup"><block type="variables_declare"><field name="VAR">tiempo_rojo</field><field name="TYPE">unsigned int</field><value name="VALUE"><block type="math_number"><field name="NUM">10</field></block></value><next><block type="variables_declare"><field name="VAR">tiempo_verde</field><field name="TYPE">unsigned int</field><value name="VALUE"><block type="math_number"><field name="NUM">20</field></block></value><next><block type="variables_declare"><field name="VAR">tiempo_amarillo</field><field name="TYPE">unsigned int</field><value name="VALUE"><block type="math_number"><field name="NUM">5</field></block></value><next><block type="variables_declare"><field name="VAR">estado</field><field name="TYPE">unsigned int</field><comment pinned="false" h="80" w="160">Estado 0 = Verde
Estado 1 = Amarillo
Estado 2 = Rojo</comment><value name="VALUE"><block type="math_number"><field name="NUM">0</field></block></value><next><block type="variables_declare"><field name="VAR">tiempo_semaforo</field><field name="TYPE">unsigned int</field><value name="VALUE"><block type="variables_get"><field name="VAR">tiempo_verde</field></block></value><next><block type="actuator_rgbled"><field name="RGB_TYPE">1</field><field name="PINRed">5</field><field name="PINGreen">9</field><field name="PINBlue">11</field><field name="RGBCOLOR">#33ff33</field><next><block type="serial_init"><field name="PINBAUDIOS">115200</field></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name="MyLoop"><block type="tempo_no_delay"><field name="unit">s</field><value name="DELAY_TIME"><shadow type="math_number"><field name="NUM">5</field></shadow><block type="variables_get"><field name="VAR">tiempo_semaforo</field></block></value><statement name="branch"><block type="controls_if"><mutation elseif="1" else="1"></mutation><value name="IF0"><block type="logic_compare"><field name="OP">EQ</field><value name="A"><block type="variables_get"><field name="VAR">estado</field></block></value><value name="B"><block type="math_number"><field name="NUM">0</field></block></value></block></value><statement name="DO0"><block type="variables_set"><field name="VAR">tiempo_semaforo</field><value name="VALUE"><block type="variables_get"><field name="VAR">tiempo_amarillo</field></block></value><next><block type="variables_set"><field name="VAR">estado</field><value name="VALUE"><block type="math_number"><field name="NUM">1</field></block></value><next><block type="serial_print"><value name="CONTENT"><shadow type="text"><field name="TEXT">text</field></shadow><block type="text"><field name="TEXT">Pasamos a ambar</field></block></value><next><block type="actuator_rgbled"><field name="RGB_TYPE">1</field><field name="PINRed">5</field><field name="PINGreen">9</field><field name="PINBlue">11</field><field name="RGBCOLOR">#ffff00</field></block></next></block></next></block></next></block></statement><value name="IF1"><block type="logic_compare"><field name="OP">EQ</field><value name="A"><block type="variables_get"><field name="VAR">estado</field></block></value><value name="B"><block type="math_number"><field name="NUM">1</field></block></value></block></value><statement name="DO1"><block type="variables_set"><field name="VAR">tiempo_semaforo</field><value name="VALUE"><block type="variables_get"><field name="VAR">tiempo_rojo</field></block></value><next><block type="variables_set"><field name="VAR">estado</field><value name="VALUE"><block type="math_number"><field name="NUM">2</field></block></value><next><block type="serial_print"><value name="CONTENT"><shadow type="text"><field name="TEXT">text</field></shadow><block type="text"><field name="TEXT">Pasamos a rojo</field></block></value><next><block type="actuator_rgbled"><field name="RGB_TYPE">1</field><field name="PINRed">5</field><field name="PINGreen">9</field><field name="PINBlue">11</field><field name="RGBCOLOR">#ff0000</field></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="variables_set"><field name="VAR">tiempo_semaforo</field><value name="VALUE"><block type="variables_get"><field name="VAR">tiempo_verde</field></block></value><next><block type="variables_set"><field name="VAR">estado</field><value name="VALUE"><block type="math_number"><field name="NUM">0</field></block></value><next><block type="serial_print"><value name="CONTENT"><shadow type="text"><field name="TEXT">text</field></shadow><block type="text"><field name="TEXT">Pasamos a verde</field></block></value><next><block type="actuator_rgbled"><field name="RGB_TYPE">1</field><field name="PINRed">5</field><field name="PINGreen">9</field><field name="PINBlue">11</field><field name="RGBCOLOR">#33ff33</field></block></next></block></next></block></next></block></statement></block></statement><next><block type="controls_if"><value name="IF0"><block type="logic_operation"><field name="OP">AND</field><value name="A"><block type="logic_compare"><field name="OP">EQ</field><value name="A"><block type="variables_get"><field name="VAR">estado</field></block></value><value name="B"><block type="math_number"><field name="NUM">0</field></block></value></block></value><value name="B"><block type="button_sensor"><field name="PIN_BUTTON">13</field><field name="LOGIC">FALSE</field></block></value></block></value><statement name="DO0"><block type="serial_print"><value name="CONTENT"><shadow type="text"><field name="TEXT">text</field></shadow><block type="text"><field name="TEXT">Bot√≥n pulsado tras 4 segundos ponemos amarillo</field></block></value><next><block type="base_delays"><value name="DELAY_TIME"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_number"><field name="NUM">4</field></block></value><next><block type="actuator_rgbled"><field name="RGB_TYPE">1</field><field name="PINRed">5</field><field name="PINGreen">9</field><field name="PINBlue">11</field><field name="RGBCOLOR">#ffff00</field><next><block type="variables_set"><field name="VAR">estado</field><value name="VALUE"><block type="math_number"><field name="NUM">1</field></block></value><next><block type="variables_set"><field name="VAR">tiempo_semaforo</field><value name="VALUE"><block type="variables_get"><field name="VAR">tiempo_amarillo</field></block></value></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block></xml>